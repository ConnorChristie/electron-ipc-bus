<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta charset="utf-8" />
    <title>IPC Test App</title>
    <script>
       //const el = require("electron")

        ipcBus.subscribe("ipc-tests-main", function(topic, content) {

            console.log("Received message on '" + topic + "' / '" + content + "' !")
        })
        console.log("There is " + ipcBus.listenerCount("ipc-tests-main") + " listeners on 'ipc-tests-main' !")

        function doNewHtmlView() {

            //ipcBus.send("ipc-tests/subscribe-main-topic")
        }

        function sendTestMessage() {

            ipcBus.send("ipc-tests-main")
        }

        function queryBrokerState() {
            
            ipcBus.queryBrokerState()
        }


        function doNewNodeInstance() {

            ipcBus.send("ipc-tests/new-node-instance")
        }

        function doMainSubscribe() {

            var topic = document.getElementById("mainTopic").value;
            var option = document.createElement("option");
            option.text = topic;
            document.getElementById("mainSubscribedTopics").add(option)
        }


    </script>
</head>

<body>

    <b>APP ITEMS</b><br />
    <a href="javascript:doNewHtmlView();">New HTML View</a>
    &nbsp;|&nbsp;
    <a href="javascript:doNewNodeInstance();">New Node Instance</a>
    <hr />

    <b>MAIN PROCESS</b><br />
    <a href="javascript:doMainSubscribe();">Subscribe</a>&nbsp;:&nbsp;<input id="mainTopic" type="text" />
    &nbsp;|&nbsp;
    <a href="javascript:doMainUnsubscribe();">Unsubscribe</a>&nbsp;:&nbsp;<select id="mainSubscribedTopics"></select>
    <hr />
    <a href="javascript:sendTestMessage();">Send Test Message</a>
    

    <b>BROKER PROCESS</b><br />
    <hr />

    <b>NODE PROCESS</b>
    <b>NODE PROCESS</b>
    <a href="javascript:test();">Test</a><br />
    <a href="javascript:openPopup();">Open Popup</a><br />
    <a href="javascript:testOpener();">Test Opener</a><br />
    <a href="javascript:sendIpcMessage();">Send IPC Message</a><br />
    <a href="javascript:queryBrokerState();">Query Broker's state</a><br />

</body>
</html>